<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Por el poder de los sistemas de ecuaciones de Grayskull - Escape room Matem√°tico</title>

  <!-- Favicon -->
  <link rel="icon" type="image/png" href="favicon.png">

  <!-- Tipograf√≠as fantasy -->
  <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@600;800&family=MedievalSharp&display=swap" rel="stylesheet">

  <style>
    body {
      margin: 0;
      font-family: 'Cinzel', serif;
      background: radial-gradient(circle at top, #2b2b5f, #0f0f1f);
      color: #f5f5dc;
    }
    header {
      background: linear-gradient(90deg, #3a3a8a, #1f1f4a);
      padding: 1rem;
      text-align: center;
      font-size: 1.6rem;
      font-weight: 800;
      letter-spacing: 2px;
      text-shadow: 2px 2px 4px #000;
    }
    main { padding: 1rem; max-width: 900px; margin: auto; }
    h2, h3 { font-family: 'MedievalSharp', cursive; letter-spacing: 1px; }
    .hidden { display: none; }
    .card {
      text-align: center;
      background: rgba(0,0,0,0.6);
      padding: 1.2rem;
      border-radius: 14px;
      margin-bottom: 1.2rem;
      box-shadow: 0 0 15px rgba(255,215,0,0.3);
    }
    button {
      background: linear-gradient(#c9a227, #8b6b14);
      color: #000;
      border: none;
      padding: 0.7rem 1rem;
      font-size: 1rem;
      border-radius: 10px;
      cursor: pointer;
      margin: 0.3rem 0.2rem;
      font-family: 'Cinzel', serif;
    }
    button:hover { background: linear-gradient(#ffd700, #c9a227); }
    .timer {
      font-size: 1.1rem;
      font-weight: bold;
      text-align: right;
      margin-bottom: 0.5rem;
      color: #ffd700;
    }
    select, input { padding: 0.4rem; margin: 0.2rem 0; width: 100%; max-width: 200px; }
    iframe, img { max-width: 100%; border-radius: 10px; margin: 0.5rem 0; }
    .error { color: #ff9999; font-weight: bold; }
    .feedback { color: #9fd3ff; margin-top: 0.5rem; font-size: 0.9rem; }
    .teacher { background: rgba(255,255,255,0.08); padding: 0.6rem; border-radius: 8px; margin-top: 0.6rem; font-size: 0.85rem; color: #c9e6ff; }
    @media (max-width: 600px) { header { font-size: 1.2rem; } button { width: 100%; } }
  </style>
</head>
<body>
<header>‚öîÔ∏è Por el poder de los sistemas de ecuaciones de Grayskull ‚Äì Escape room Matem√°tico ‚öîÔ∏è</header>
<main>

<section id="start">
  <div class="card">
    <h2>La amenaza de Skeletor</h2>
    <p>Skeletor ha sellado Grayskull con cuatro cerraduras matem√°ticas. He‚ÄëMan necesita tu ayuda.<br><br><strong>Instrucciones:</strong> observa los v√≠deos para inspirarte, lee atentamente el contexto y elige el tiempo disponible. Trabajar√°s en equipo resolviendo sistemas de ecuaciones para avanzar.</p>

        <!-- V√≠deos introductorios -->
    <iframe width="560" height="315" src="https://www.youtube.com/embed/w-hQZx9oFhw?si=bT-8NwTjA6YwOWMj" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
    <iframe width="560" height="315" src="https://www.youtube.com/embed/nYX0PkQkkWU?si=f2HxdZmcjV5vYKet" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
    
    <!-- Imagen introductoria -->
    <img src="./resources/imagen_inicio.png" alt="Grayskull y He‚ÄëMan">

    <button onclick="startGame(60)">‚è±Ô∏è 60 minutos</button>
    <button onclick="startGame(90)">‚è±Ô∏è 90 minutos</button>
    <hr>
    <input type="password" id="teacherPass" placeholder="Modo profesor">
    <button onclick="toggleTeacher()">Activar</button>
    <hr>
    <p>Autor: Joaqu√≠n Canda√±edo.<br><a href="https://creativecommons.org/licenses/by-sa/4.0/"><img src="./resources/CC_BY_SA.png" alt="Grayskull y He‚ÄëMan"></a></p>
  </div>
</section>

<section id="p1" class="hidden"><div class="timer"></div><div class="card"><h2>Trap Jaw</h2><img src="./resources/imagen_trapjaw.png" alt="Trap Jaw"><p>Trap Jaw controla el puente mec√°nico que conduce a Grayskull. La energ√≠a necesaria para desactivar sus mecanismos depende de la combinaci√≥n de tres cristales de poder. Cada intento de activaci√≥n genera una relaci√≥n distinta entre los cristales. Solo comprendiendo c√≥mo se relacionan entre s√≠ podr√°s avanzar sin que el puente colapse.<br><br>Analiza el sistema de ecuaciones. Decide si tiene una soluci√≥n (y calcula cu√°l), infinitas soluciones o ninguna antes de responder.</p><p>2x + y - z = 5<br>4x + 2y - 2z = 10<br>2x + y - z = 7</p><select id="p1type" onchange="toggleSolution('p1')"><option value="">Tipo</option><option value="none">Sin soluci√≥n</option><option value="inf">Infinitas</option><option value="one">√önica</option></select><div id="p1sol" class="hidden"></div><button onclick="checkP1()">Comprobar</button><p id="p1error" class="error hidden">Incorrecto</p><div class="teacher hidden">Incompatible</div></div></section>

<section id="p2" class="hidden"><div class="timer"></div><div class="card"><h2>Beast Man</h2><img src="./resources/imagen_beastman.png" alt="Beast Man"><p>Beast Man ha reunido a sus criaturas en el Valle Salvaje. El n√∫mero de bestias de cada tipo est√° relacionado seg√∫n ciertas reglas que √©l mismo ha impuesto. Para dispersar a la manada y continuar tu camino, debes analizar cuidadosamente estas relaciones y decidir c√≥mo pueden cumplirse al mismo tiempo.<br><br>Analiza el sistema de ecuaciones. Decide si tiene una soluci√≥n (y calcula cu√°l), infinitas soluciones o ninguna antes de responder.</p><p>x + 2y + z = 10<br>2x + 4y + 2z = 20<br>3x + 6y + 3z = 30</p><select id="p2type" onchange="toggleSolution('p2')"><option value="">Tipo</option><option value="none">Sin soluci√≥n</option><option value="inf">Infinitas</option><option value="one">√önica</option></select><div id="p2sol" class="hidden"></div><button onclick="checkP2()">Comprobar</button><p id="p2error" class="error hidden">Incorrecto</p><div class="teacher hidden">Indeterminado</div></div></section>

<section id="p3" class="hidden"><div class="timer"></div><div class="card"><h2>Evil-Lyn</h2><img src="./resources/imagen_evillyn.png" alt="Evil-Lyn"><p>Evil-Lyn ha lanzado un poderoso hechizo basado en tres orbes m√°gicos. La intensidad del conjuro depende de c√≥mo se combinan sus energ√≠as. Solo si eres capaz de descifrar las relaciones entre los orbes podr√°s neutralizar el hechizo y evitar que el castillo quede sellado para siempre.<br><br>Analiza el sistema de ecuaciones. Decide si tiene una soluci√≥n (y calcula cu√°l), infinitas soluciones o ninguna antes de responder.</p><p>2x + y + z = 13<br>x + 2y + z = 14<br>x + y + 2z = 15</p><select id="p3type" onchange="toggleSolution('p3')"><option value="">Tipo</option><option value="none">Sin soluci√≥n</option><option value="inf">Infinitas</option><option value="one">√önica</option></select><div id="p3sol" class="hidden"><input id="p3x" placeholder="x"><input id="p3y" placeholder="y"><input id="p3z" placeholder="z"></div><button onclick="checkP3()">Comprobar</button><p id="p3error" class="error hidden">Incorrecto</p><div class="teacher hidden">(3,4,5)</div></div></section>

<section id="p4" class="hidden"><div class="timer"></div><div class="card"><h2>Skeletor</h2><img src="./resources/imagen_skeletor.png" alt="Skeletor"><p>Skeletor ha activado el sello definitivo sobre Grayskull. El equilibrio del hechizo se basa en tres fuerzas oscuras que deben analizarse con precisi√≥n. Un solo error har√° que el poder del castillo se pierda. Examina con atenci√≥n las relaciones entre estas fuerzas y decide c√≥mo enfrentarte al desaf√≠o final.<br><br>Analiza el sistema de ecuaciones. Decide si tiene una soluci√≥n (y calcula cu√°l), infinitas soluciones o ninguna antes de responder.</p><p>2x + y + z = 11<br>x + 3y + z = 13<br>x + y + 4z = 19</p><select id="p4type" onchange="toggleSolution('p4')"><option value="">Tipo</option><option value="none">Sin soluci√≥n</option><option value="inf">Infinitas</option><option value="one">√önica</option></select><div id="p4sol" class="hidden"><input id="p4x" placeholder="x"><input id="p4y" placeholder="y"><input id="p4z" placeholder="z"></div><button onclick="checkP4()">Comprobar</button><p id="p4error" class="error hidden">Incorrecto</p><div class="teacher hidden">(2,3,4)</div></div></section>

<section id="lock" class="hidden">
  <div class="timer"></div>
  <div class="card">
    <h2>üîê Candado final de Grayskull üîê</h2>

    <!-- Imagen del candado -->
    <img src="./resources/imagen_candado.png" alt="Candado de Grayskull">

    <p><strong>C√≥mo construir las claves:</strong><br>‚Ä¢ Trap Jaw: escribe el tipo de sistema en MAY√öSCULAS.<br>‚Ä¢ Beast Man: escribe el tipo de sistema en MAY√öSCULAS.<br>‚Ä¢ Evil‚ÄëLyn: concatena los valores de x, y y z sin comas.<br>‚Ä¢ Skeletor: concatena los valores de x, y y z sin comas.</p>

    <input id="c1" placeholder="Clave Trap Jaw">
    <input id="c2" placeholder="Clave Beast Man">
    <input id="c3" placeholder="Clave Evil‚ÄëLyn">
    <input id="c4" placeholder="Clave Skeletor">
    <button onclick="checkLock()">Abrir</button>
  </div>
</section>

<section id="success" class="hidden">
  <div class="card">
    <h2>üåü ¬°Grayskull ha sido liberado! üåü</h2>

    <!-- Imagen de victoria -->
    <img src="./resources/imagen_exito.png" alt="Victoria de He‚ÄëMan">

    <!-- V√≠deo final de √©xito -->
    <iframe width="560" height="315" src="https://www.youtube.com/embed/PfUGh8ZXIBg?si=QE_nwxpIUsmB_-cn" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>

    <p>Hab√©is demostrado vuestro poder resolviendo sistemas de ecuaciones.</p>
  </div>
</section>
<section id="fail" class="hidden">
  <div class="card">
    <h2>üíÄ Skeletor ha vencido üíÄ</h2>

    <!-- Imagen de derrota -->
    <img src="./resources/imagen_fracaso.png" alt="Skeletor victorioso">

    <!-- V√≠deo de derrota -->
    <iframe width="560" height="315" src="https://www.youtube.com/embed/671LhWIr3Cg?si=6fVrD7QddU3VnpSD" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>

    <p>El tiempo se ha agotado‚Ä¶ pero siempre se puede aprender del error.</p>
    <button onclick="resetGame()">üîÅ Intentarlo de nuevo</button>
  </div>
</section>

</main>

<script>
let timeLeft, interval;

function startGame(min) {
  timeLeft = min * 60;
  show('p1');
  interval = setInterval(updateTimer, 1000);
}

function updateTimer() {
  if (timeLeft <= 0) {
    clearInterval(interval);
    show('fail');
    return;
  }
  timeLeft--;
  document.querySelectorAll('.timer').forEach(t => t.textContent = `‚è≥ ${Math.floor(timeLeft/60)}:${String(timeLeft%60).padStart(2,'0')}`);
}

function resetGame() {
  clearInterval(interval);
  document.querySelectorAll('input').forEach(i => i.value = '');
  show('start');
}

function show(id) {
  document.querySelectorAll('section').forEach(s => s.classList.add('hidden'));
  document.getElementById(id).classList.remove('hidden');
}

function toggleTeacher() {
  if (teacherPass.value === 'PROFE') document.querySelectorAll('.teacher').forEach(e => e.classList.remove('hidden'));
}

function toggleSolution(pid) {
  const type = document.getElementById(pid + 'type').value;
  const sol = document.getElementById(pid + 'sol');
  if (sol) sol.classList.toggle('hidden', type !== 'one');
}

function checkP1(){ p1type.value==='none' ? show('p2') : p1error.classList.remove('hidden'); }
function checkP2(){ p2type.value==='inf' ? show('p3') : p2error.classList.remove('hidden'); }
function checkP3(){ (p3type.value==='one' && +p3x.value===3 && +p3y.value===4 && +p3z.value===5) ? show('p4') : p3error.classList.remove('hidden'); }
function checkP4(){ (p4type.value==='one' && +p4x.value===2 && +p4y.value===3 && +p4z.value===4) ? show('lock') : p4error.classList.remove('hidden'); }

function checkLock(){ clearInterval(interval); (c1.value==='INCOMPATIBLE' && c2.value==='INDETERMINADO' && c3.value==='345' && c4.value==='234') ? show('success') : show('fail'); }
</script>
</body>
</html>
